local player = game.Players.LocalPlayer
local playerGui = player:FindFirstChildOfClass("PlayerGui")

-- Function to show a notification with custom text
local function showNotification(message)
    -- Create a ScreenGui for the notification
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = playerGui
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling -- Make sure it's on top of other GUIs

    -- Create the black box (without grey box)
    local blackBox = Instance.new("Frame")
    blackBox.Size = UDim2.new(0, 280, 0, 80) -- Make the black box longer
    blackBox.Position = UDim2.new(1, -20, 1, -20) -- Position the black box at the bottom right with a 20px margin
    blackBox.AnchorPoint = Vector2.new(1, 1) -- Anchoring to the bottom right
    blackBox.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black background
    blackBox.Parent = screenGui

    -- Add rounded corners to the black box using UICorner
    local blackUICorner = Instance.new("UICorner")
    blackUICorner.CornerRadius = UDim.new(0, 16)  -- Rounded corners for the black box
    blackUICorner.Parent = blackBox

    -- Add a white check mark emoji
    local checkmark = Instance.new("TextLabel")
    checkmark.Size = UDim2.new(0, 40, 0, 40)
    checkmark.Position = UDim2.new(0, 10, 0.5, -20) -- Place the checkmark on the left of the black box
    checkmark.Text = "âœ”"
    checkmark.TextColor3 = Color3.fromRGB(255, 255, 255) -- White color for the checkmark
    checkmark.BackgroundTransparency = 1
    checkmark.TextScaled = true
    checkmark.Parent = blackBox

    -- Create the notification text
    local notificationText = Instance.new("TextLabel")
    notificationText.Size = UDim2.new(1, -60, 1, 0) -- Adjust text box size to avoid overlap with the checkmark
    notificationText.Position = UDim2.new(0, 50, 0, 0) -- Position text after checkmark
    notificationText.Text = message
    notificationText.TextColor3 = Color3.fromRGB(255, 255, 255) -- White text
    notificationText.TextScaled = true
    notificationText.BackgroundTransparency = 1
    notificationText.Font = Enum.Font.Gotham
    notificationText.Parent = blackBox

    -- Wait for 5 seconds before removing the notification
    wait(5)
    screenGui:Destroy() -- Remove the notification after 5 seconds
end

-- Whitelist of allowed user IDs
local whitelist = {
    7715056731, -- Replace with actual user IDs
    987654321
}

-- Function to check if a player is whitelisted
local function isWhitelisted(userId)
    for _, id in pairs(whitelist) do
        if id == userId then
            return true
        end
    end
    return false
end

wait(10)

-- Check if the player is whitelisted
if isWhitelisted(player.UserId) then
    -- Show the success notification after verification
    showNotification("Thank you for choosing Isaiah x Z!")
    wait(5) -- Give time for the notification to display before continuing
    
    -- The script to execute after loading for whitelisted users
    local screenGui = Instance.new("ScreenGui")
    screenGui.ResetOnSpawn = false -- Prevent GUI from disappearing on reset
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 200, 0, 50)
    button.Position = UDim2.new(0.9, -100, 0, 0) -- Position at the top right of the screen
    button.Text = "VC BYPASS"
    button.Font = Enum.Font.GothamBold
    button.TextScaled = true -- Scale text size automatically
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Set background to black
    button.BorderSizePixel = 2
    button.BorderColor3 = Color3.fromRGB(255, 255, 255)
    button.Parent = screenGui

    -- Add UI corners to the VC bypass button
    local buttonUICorner = Instance.new("UICorner")
    buttonUICorner.CornerRadius = UDim.new(0, 16)  -- Rounded corners for the button
    buttonUICorner.Parent = button

    -- Add hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Hover background remains black
    end)

    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Hover background remains black
    end)

    -- Button click event
    button.MouseButton1Click:Connect(function()
        local VoiceChatService = game:GetService("VoiceChatService")
        VoiceChatService:joinVoice()
    end)
else
    -- Non-whitelisted users will have a different behavior
    -- Display flashing image and reset character every 10 seconds

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FlashingImageGui"
    screenGui.IgnoreGuiInset = true -- Prevent GUI from respecting the top bar inset
    screenGui.ResetOnSpawn = false -- Prevent GUI from disappearing on reset
    screenGui.Parent = playerGui

    -- Create a Frame to cover the entire screen with a black background
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.Position = UDim2.new(0, 0, 0, 0)
    frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    frame.Parent = screenGui

    -- Create an ImageLabel for the flashing image
    local imageLabel = Instance.new("ImageLabel")
    imageLabel.Size = UDim2.new(1, 0, 1, 0)
    imageLabel.Position = UDim2.new(0, 0, 0, 0)
    imageLabel.Image = "rbxassetid://114427013717266" -- Use the correct decal ID
    imageLabel.BackgroundTransparency = 1
    imageLabel.Parent = frame

    -- Create a TextLabel to display the main message on top of the flashing image
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 0.5, 0)
    textLabel.Position = UDim2.new(0, 0, 0.25, 0)
    textLabel.Text = "You thought bitch nigga! ðŸ¤£"
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextScaled = true
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Set text color to white
    textLabel.BackgroundTransparency = 1
    textLabel.Parent = frame

    -- Create a smaller TextLabel to display the secondary message
    local subTextLabel = Instance.new("TextLabel")
    subTextLabel.Size = UDim2.new(1, 0, 0.2, 0)
    subTextLabel.Position = UDim2.new(0, 0, 0.7, 0)
    subTextLabel.Text = "get whitelisted .gg/uCSrk6BV6r"
    subTextLabel.Font = Enum.Font.Gotham
    subTextLabel.TextScaled = true
    subTextLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Set text color to white
    subTextLabel.BackgroundTransparency = 1
    subTextLabel.Parent = frame

    -- Add the first sound
    local sound1 = Instance.new("Sound")
    sound1.SoundId = "rbxassetid://602163388"
    sound1.Volume = 10 -- Increase the volume
    sound1.Looped = true -- Enable looping
    sound1.Parent = screenGui

    -- Add the second sound
    local sound2 = Instance.new("Sound")
    sound2.SoundId = "rbxassetid://343430735"
    sound2.Volume = 10 -- Increase the volume
    sound2.Looped = true -- Enable looping
    sound2.Parent = screenGui

    -- Add the third sound
    local sound3 = Instance.new("Sound")
    sound3.SoundId = "rbxassetid://6567183465"
    sound3.Volume = 10 -- Increase the volume
    sound3.Looped = true -- Enable looping
    sound3.Parent = screenGui

    -- Play the sounds
    sound1:Play()
    sound2:Play()
    sound3:Play()

    -- Function to flash the image
    local function flashImage()
        while true do
            imageLabel.Visible = not imageLabel.Visible
            wait(0.05) -- Flash the image every 0.05 seconds (20 flashes per second)
        end
    end

    -- Start flashing the image in a coroutine
    coroutine.wrap(flashImage)()

    -- Function to reset the character
    local function resetCharacter()
        while true do
            player:LoadCharacter() -- Reset the character
            wait(10) -- Wait 10 seconds before resetting again
        end
    end

    -- Start resetting the character in a coroutine
    coroutine.wrap(resetCharacter)()
end
